{"ast":null,"code":"import\"antd/es/layout/style/css\";import _Layout from\"antd/es/layout\";import\"antd/es/empty/style/css\";import _Empty from\"antd/es/empty\";import _taggedTemplateLiteral from\"/home/creator-76/bc/web/bcopp-blog-frontend-github-pages/react-antd/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import\"antd/es/spin/style/css\";import _Spin from\"antd/es/spin\";import\"antd/es/message/style/css\";import _message from\"antd/es/message\";import _slicedToArray from\"/home/creator-76/bc/web/bcopp-blog-frontend-github-pages/react-antd/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"antd/es/typography/style/css\";import _Typography from\"antd/es/typography\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  max-height: 150px;\\n  width: auto;\\n  border-radius: 50%;\\n  background-size: cover;\\n\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState}from'react';import styled from'styled-components';import{useHistory}from'react-router-dom';import{createGlobalState}from'react-hooks-global-state';import useGetHandler from'../hooks/FlaskAPI';import queryString from'query-string';var Title=_Typography.Title;var initialState={entries:null,lastSearch:''};var _createGlobalState=createGlobalState(initialState),useGlobalState=_createGlobalState.useGlobalState;var articlesRequest={method:'get',url:'/articles/'};export var Blog=function Blog(props){var _useGlobalState=useGlobalState('entries'),_useGlobalState2=_slicedToArray(_useGlobalState,2),entries=_useGlobalState2[0],setEntries=_useGlobalState2[1];var _useGlobalState3=useGlobalState('lastSearch'),_useGlobalState4=_slicedToArray(_useGlobalState3,2),lastSearch=_useGlobalState4[0],setLastSearch=_useGlobalState4[1];var _useGetHandler=useGetHandler(),data=_useGetHandler.data,isLoading=_useGetHandler.isLoading,hasError=_useGetHandler.hasError,handleRequest=_useGetHandler.handleRequest;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),shownError=_useState2[0],setShownError=_useState2[1];var paramsSearch=props.location.search;var params=paramsSearch.length!==0?queryString.parse(paramsSearch.substr(1)):{};if(hasError){if(shownError==false){_message.error(\"An error has occured, please reload the page\");setShownError(true);}return/*#__PURE__*/React.createElement(\"div\",null,\"Error\");}if(data!==entries){console.log(\"PARAMS\");console.log(params);console.log(\"DATA\");console.log(data);console.log(\"ENTRIES\");console.log(entries);setEntries(data);}if(isLoading){return/*#__PURE__*/React.createElement(_Spin,{size:\"large\"});}else{// Display without search query\nif(!('q'in params)){if(lastSearch===\"\"&&entries!==null){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null,/*#__PURE__*/React.createElement(\"h2\",{style:{color:\"white\"}},\"Latest Posts\")),/*#__PURE__*/React.createElement(Content,null,/*#__PURE__*/React.createElement(EntryList,{entries:entries})),/*#__PURE__*/React.createElement(Footer,null));}else{handleRequest(articlesRequest);}}// Display using search query\nelse if(params.q===lastSearch){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null,/*#__PURE__*/React.createElement(\"h1\",{style:{color:\"white\"}},\"Searched: ...\")),/*#__PURE__*/React.createElement(Content,null,/*#__PURE__*/React.createElement(EntryList,{entries:entries})),/*#__PURE__*/React.createElement(Footer,null));}else{handleRequest(articlesRequest);}}return/*#__PURE__*/React.createElement(\"div\",null);};var CenterFlex=styled.div(_templateObject());var EntryList=function EntryList(props){return/*#__PURE__*/React.createElement(\"div\",{style:{padding:\"10px\",paddingTop:\"30px\",background:\"#eee\"}},/*#__PURE__*/React.createElement(CenterFlex,null,props.entries.length==0?/*#__PURE__*/React.createElement(_Empty,null):/*#__PURE__*/React.createElement(\"div\",null,props.entries.map(function(e){return/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(Entry,{entry:e}));}))));};var Thumbnail=styled.img(_templateObject2());var Header=_Layout.Header,Footer=_Layout.Footer,Sider=_Layout.Sider,Content=_Layout.Content;var Entry=function Entry(props){var history=useHistory();var navToArticle=function navToArticle(){history.push(props.entry.slug);};return/*#__PURE__*/React.createElement(\"div\",{style:{width:\"80vw\",background:\"#eee\"}},/*#__PURE__*/React.createElement(_Layout,null,/*#__PURE__*/React.createElement(Sider,{style:{background:\"#eee\"}},/*#__PURE__*/React.createElement(Thumbnail,{src:props.entry.thumbnailLink})),/*#__PURE__*/React.createElement(_Layout,null,/*#__PURE__*/React.createElement(Header,{style:{background:\"#eee\"}},/*#__PURE__*/React.createElement(\"div\",{onClick:navToArticle,style:{textAlign:\"left\"}},/*#__PURE__*/React.createElement(Title,{level:3},props.entry.title))),/*#__PURE__*/React.createElement(Footer,{style:{background:\"#eee\"}},/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:\"left\"}},/*#__PURE__*/React.createElement(Title,{level:4,type:\"secondary\"},props.entry.timestamp))))));};//{props.entries.map(e => <Project entry={e} />)}\nexport default Blog;","map":{"version":3,"sources":["/home/creator-76/bc/web/bcopp-blog-frontend-github-pages/react-antd/src/components/Blog.tsx"],"names":["React","useState","styled","useHistory","createGlobalState","useGetHandler","queryString","Title","initialState","entries","lastSearch","useGlobalState","articlesRequest","method","url","Blog","props","setEntries","setLastSearch","data","isLoading","hasError","handleRequest","shownError","setShownError","paramsSearch","location","search","params","length","parse","substr","error","console","log","color","q","CenterFlex","div","EntryList","padding","paddingTop","background","map","e","Thumbnail","img","Header","Footer","Sider","Content","Entry","history","navToArticle","push","entry","slug","width","thumbnailLink","textAlign","title","timestamp"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { ArticleMeta } from '../data/ArticleMeta'\nimport { useHistory, RouteComponentProps } from 'react-router-dom';\nimport { createGlobalState } from 'react-hooks-global-state';\nimport useGetHandler from '../hooks/FlaskAPI'\nimport queryString from 'query-string'\nimport { Spin, message, Typography, Layout, Empty } from 'antd'\n\nconst { Title } = Typography\nconst initialState = { entries: null, lastSearch: '' }\nconst { useGlobalState } = createGlobalState(initialState)\n\nconst articlesRequest = {\n  method: 'get',\n  url: '/articles/',\n};\n\ninterface rquery {\n  id?: string\n}\n\nexport const Blog: React.FC<RouteComponentProps<rquery>> = (props: any) => {\n\n  const [entries, setEntries] = useGlobalState('entries');\n  const [lastSearch, setLastSearch] = useGlobalState('lastSearch');\n  const { data, isLoading, hasError, handleRequest } = useGetHandler();\n  const [shownError, setShownError] = useState(false)\n\n  let paramsSearch = props.location.search\n  const params = (paramsSearch.length !== 0) ?\n    queryString.parse(paramsSearch.substr(1))\n    :\n    {}\n \n  if (hasError) {\n    if (shownError == false) {\n      message.error(\"An error has occured, please reload the page\")\n      setShownError(true)\n    } \n    return <div>Error</div>\n  }\n\n  if (data !== entries) {\n    console.log(\"PARAMS\")\n    console.log(params)\n    console.log(\"DATA\")\n    console.log(data)\n    console.log(\"ENTRIES\")\n    console.log(entries)\n    setEntries(data)\n  }\n\n  if (isLoading) {\n    return (<Spin size='large' />)\n  }\n  else {\n    // Display without search query\n    if (!('q' in params)) {\n      if (lastSearch === \"\" && entries !== null) {\n        return (\n          <div>\n            <Header><h2 style={{ color:\"white\" }}>Latest Posts</h2></Header>\n            <Content><EntryList entries={entries as unknown as ArticleMeta[]} /></Content>\n            <Footer></Footer>\n          </div>\n        );\n      }\n      else {\n        handleRequest(articlesRequest)\n      }\n    }\n    // Display using search query\n    else if (params.q === lastSearch) {\n      return (\n        <div>\n          <Header><h1 style={{ color:\"white\"}}>Searched: ...</h1></Header>\n          <Content><EntryList entries={entries as unknown as ArticleMeta[]} /></Content>\n          <Footer></Footer>\n        </div>\n      )\n    }\n    else {\n      handleRequest(articlesRequest)\n    }\n  }\n\n  return (<div></div>)\n};\n\n\nconst CenterFlex = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\nconst EntryList: React.FC<{\n  entries: ArticleMeta[]\n}> = (props) => {\n\n  return (\n    <div style={{ padding: \"10px\", paddingTop: \"30px\", background: \"#eee\" }}>\n      <CenterFlex>\n        {(props.entries.length) == 0 ?\n          < Empty />\n          :\n          <div>{props.entries.map((e) => <ul><Entry entry={e} /></ul>)}</div>\n        }\n      </CenterFlex>\n    </div>\n  )\n}\n\nconst Thumbnail = styled.img`\n  max-height: 150px;\n  width: auto;\n  border-radius: 50%;\n  background-size: cover;\n\n`\nconst { Header, Footer, Sider, Content } = Layout;\n\nconst Entry: React.FC<{\n  entry: ArticleMeta\n}> = (props) => {\n  const history = useHistory()\n\n  const navToArticle = () => {\n    history.push(props.entry.slug)\n  }\n\n  return (\n\n    <div style={{ width: \"80vw\", background: \"#eee\" }}>\n      <Layout>\n        <Sider style={{ background: \"#eee\" }}>\n          <Thumbnail src={props.entry.thumbnailLink} />\n        </Sider>\n        <Layout>\n          <Header style={{ background: \"#eee\" }}>\n            <div onClick={navToArticle} style={{ textAlign: \"left\" }}><Title level={3} >{props.entry.title}</Title></div>\n          </Header>\n          <Footer style={{ background: \"#eee\" }}><div style={{ textAlign: \"left\" }}><Title level={4} type=\"secondary\">{props.entry.timestamp}</Title></div></Footer>\n        </Layout>\n      </Layout>\n    </div>\n  );\n}\n\n//{props.entries.map(e => <Project entry={e} />)}\n\nexport default Blog;"]},"metadata":{},"sourceType":"module"}