{"ast":null,"code":"var _jsxFileName = \"/home/creator-76/bc/web/bcopp-blog/react-antd/src/components/BlogMain.tsx\";\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\nimport { createGlobalState } from 'react-hooks-global-state';\nimport useGetHandler from '../hooks/FlaskAPI';\nconst initialState = {\n  entries: null,\n  lastSearch: ''\n};\nconst {\n  useGlobalState\n} = createGlobalState(initialState);\nconst articlesRequest = {\n  method: 'get',\n  url: 'articles/'\n};\nexport const BlogMain = props => {\n  const [entries, setEntries] = useGlobalState('entries');\n  const [lastSearch, setLastSearch] = useGlobalState('lastSearch');\n  const {\n    data,\n    isLoading,\n    hasError,\n    handleRequest\n  } = useGetHandler();\n  const {\n    params\n  } = useParams();\n  const sup = useParams();\n  console.log(\"PARAMS\");\n  console.log(params);\n  console.log(sup);\n\n  if (hasError) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 12\n      }\n    }, \"Error\");\n  }\n\n  if (data !== entries) {\n    setEntries(data);\n  }\n\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  } else {\n    // Display without search query\n    if (params == undefined || !('q' in params)) {\n      if (lastSearch === \"\" && entries !== null) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 16\n          }\n        }, \"Entries (all)\");\n      } else {\n        handleRequest(articlesRequest);\n      }\n    } // Display using search query\n    else if (params.q === lastSearch) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 12\n          }\n        }, \"Entries search=\", params.q);\n      } else {\n        handleRequest(articlesRequest);\n      }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  });\n}; //{props.entries.map(e => <Project entry={e} />)}\n\nexport default BlogMain;","map":{"version":3,"sources":["/home/creator-76/bc/web/bcopp-blog/react-antd/src/components/BlogMain.tsx"],"names":["React","useParams","createGlobalState","useGetHandler","initialState","entries","lastSearch","useGlobalState","articlesRequest","method","url","BlogMain","props","setEntries","setLastSearch","data","isLoading","hasError","handleRequest","params","sup","console","log","undefined","q"],"mappings":";AAAA,OAAOA,KAAP,MAAgC,OAAhC;AAGA,SAASC,SAAT,QAA+C,kBAA/C;AACA,SAASC,iBAAT,QAAkC,0BAAlC;AACA,OAAOC,aAAP,MAA0B,mBAA1B;AAEA,MAAMC,YAAY,GAAG;AAAEC,EAAAA,OAAO,EAAE,IAAX;AAAiBC,EAAAA,UAAU,EAAE;AAA7B,CAArB;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAqBL,iBAAiB,CAACE,YAAD,CAA5C;AAEA,MAAMI,eAAe,GAAG;AACtBC,EAAAA,MAAM,EAAE,KADc;AAEtBC,EAAAA,GAAG,EAAE;AAFiB,CAAxB;AAKA,OAAO,MAAMC,QAAqC,GAAIC,KAAD,IAAW;AAC9D,QAAM,CAACP,OAAD,EAAUQ,UAAV,IAAwBN,cAAc,CAAC,SAAD,CAA5C;AACA,QAAM,CAACD,UAAD,EAAaQ,aAAb,IAA8BP,cAAc,CAAC,YAAD,CAAlD;AACA,QAAM;AAAEQ,IAAAA,IAAF;AAAQC,IAAAA,SAAR;AAAmBC,IAAAA,QAAnB;AAA6BC,IAAAA;AAA7B,MAA+Cf,aAAa,EAAlE;AACA,QAAM;AAAEgB,IAAAA;AAAF,MAAalB,SAAS,EAA5B;AACA,QAAMmB,GAAG,GAAGnB,SAAS,EAArB;AAEAoB,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AAEA,MAAIH,QAAJ,EAAc;AACZ,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAP;AACD;;AAED,MAAIF,IAAI,KAAKV,OAAb,EAAqB;AACnBQ,IAAAA,UAAU,CAACE,IAAD,CAAV;AACD;;AAED,MAAIC,SAAJ,EAAc;AACZ,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACD,GAFD,MAGI;AACF;AACA,QAAKG,MAAM,IAAII,SAAV,IAAuB,EAAE,OAAOJ,MAAT,CAA5B,EAA+C;AAC7C,UAAIb,UAAU,KAAK,EAAf,IAAqBD,OAAO,KAAK,IAArC,EAA2C;AACzC,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAP;AACD,OAFD,MAGK;AACHa,QAAAA,aAAa,CAACV,eAAD,CAAb;AACD;AACF,KAPD,CAQA;AARA,SASK,IAAIW,MAAM,CAACK,CAAP,KAAalB,UAAjB,EAA6B;AAClC,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAqBa,MAAM,CAACK,CAA5B,CAAP;AACC,OAFI,MAGA;AACHN,QAAAA,aAAa,CAACV,eAAD,CAAb;AACD;AACF;;AAED,sBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAR;AACD,CA1CM,C,CA4CP;;AAEA,eAAeG,QAAf","sourcesContent":["import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport EntryTrunc from '../data/Entry'\nimport { useParams, RouteComponentProps } from 'react-router-dom';\nimport { createGlobalState } from 'react-hooks-global-state';\nimport useGetHandler from '../hooks/FlaskAPI'\n\nconst initialState = { entries: null, lastSearch: '' }\nconst { useGlobalState } = createGlobalState(initialState)\n\nconst articlesRequest = {\n  method: 'get',\n  url: 'articles/',\n};\n\nexport const BlogMain: React.FunctionComponent<{}> = (props) => {\n  const [entries, setEntries] = useGlobalState('entries');\n  const [lastSearch, setLastSearch] = useGlobalState('lastSearch');\n  const { data, isLoading, hasError, handleRequest } = useGetHandler();\n  const { params } = useParams(); \n  const sup = useParams();\n\n  console.log(\"PARAMS\")\n  console.log(params)\n  console.log(sup)\n\n  if (hasError) {\n    return <div>Error</div>\n  }\n\n  if (data !== entries){\n    setEntries(data)\n  }\n\n  if (isLoading){\n    return <div>Loading...</div>\n  }\n  else{\n    // Display without search query\n    if ( params == undefined || !('q' in params) ) { \n      if (lastSearch === \"\" && entries !== null) {\n        return <div>Entries (all)</div>\n      }\n      else {\n        handleRequest(articlesRequest)\n      }\n    }\n    // Display using search query\n    else if (params.q === lastSearch) {\n    return <div>Entries search={params.q}</div>\n    }\n    else {\n      handleRequest(articlesRequest)\n    }\n  }\n\n  return (<div></div>)\n};\n\n//{props.entries.map(e => <Project entry={e} />)}\n\nexport default BlogMain;"]},"metadata":{},"sourceType":"module"}